{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","views/base/AddStory.js"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","length","i","F","s","n","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","db","firebase","firestore","collection","BasicForms","props","onNameChange","input","currentTarget","setState","name","onImageChange","event","target","files","getImagePreview","then","preview","file","onAvatarsChange","a","push","avatars","onFileChange","onCategoryChange","checked","id","categories","state","index","findIndex","category","holder","handleSubmit","preventDefault","cover","defaultIcon","explorePageIcon","recommendedTitleIcon","avatarStyles","promises","categoryIDs","forEach","isLoading","add","views","reviews","likes","description","docRef","showNotification","NOTIFICATION","SUCCESS","INFO","path","uploadFile","avatar","Promise","all","r","backToList","catch","doc","delete","ERROR","toString","error","image","resolve","reject","reader","FileReader","readAsDataURL","onloadend","result","bind","this","console","log","history","pathname","location","directory","filename","uploadTask","storage","ref","put","on","TaskEvent","STATE_CHANGED","code","serverResponse","snapshot","getDownloadURL","downloadURL","className","color","style","width","height","xs","onSubmit","md","row","onChange","placeholder","required","accept","htmlFor","variant","multiple","map","type","custom","minHeight","src","size","onClick","Component"],"mappings":"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","file":"static/js/23.bf647843.chunk.js","sourcesContent":["import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import React, {Component} from 'react'\nimport firebase from 'firebase/app'\nimport 'firebase/storage'\nimport 'firebase/firestore'\nimport {\n    CButton,\n    CCard,\n    CCardBody,\n    CCardFooter,\n    CCardHeader,\n    CCol,\n    CForm,\n    CFormGroup,\n    CFormText,\n    CInput,\n    CInputFile,\n    CLabel,\n    CRow,\n    CTextarea,\n    CInputCheckbox,\n    CImg, CSpinner\n} from '@coreui/react'\nimport CIcon from '@coreui/icons-react'\nimport {showNotification, NOTIFICATION} from \"../../reusable/Utility\";\n\n\n// const [collapsed, setCollapsed] = React.useState(true)\n// const [showElements, setShowElements] = React.useState(true)\n\nconst directory = '_dev';\nconst db = firebase.firestore().collection(\"stories_dev\");\n\n//const BasicForms = () => {\nclass BasicForms extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isLoading: false,\n            name: '',\n            categories: [\n                {\n                    id: '5QEVhrCEvITIiaBFIE8f',\n                    name: 'Thriller',\n                    checked: false\n                },\n                {\n                    id: 'Xj95jggxg9D4RFGy0mdU',\n                    name: 'Romance',\n                    checked: false\n                },\n                {\n                    id: 'pQ1Qbg8qEwixkWYUh53q',\n                    name: 'Fantasy',\n                    checked: false\n                }\n            ],\n            cover: {\n                file: null,\n                preview: null\n            },\n            defaultIcon: {\n                file: null,\n                preview: null\n            },\n            explorePageIcon: {\n                file: null,\n                preview: null\n            },\n            recommendedTitleIcon: {\n                file: null,\n                preview: null\n            },\n            avatars: [],\n            avatarStyles: {\n                file: null\n            }\n        }\n    }\n\n    onNameChange = ({currentTarget: input}) => {\n        this.setState({name: input.value});\n    };\n    onImageChange = event => {\n        if (event.target.files[0]) {\n            this.getImagePreview(event.target.files[0]).then(preview => {\n                this.setState({[event.target.name]: {file: event.target.files[0], preview: preview}});\n            });\n        }\n    };\n    onAvatarsChange = async event => {\n        let files = [];\n        for (const file of event.target.files) {\n            let preview = await this.getImagePreview(file);\n            files.push({\n                file: file,\n                preview: preview\n            });\n        }\n        if (files.length > 0) this.setState({avatars: files});\n    };\n    onFileChange = event => {\n        this.setState({[event.target.name]: {file: event.target.files[0]}});\n    };\n    onCategoryChange = event => {\n        let {checked, id} = event.target;\n        let {categories} = this.state;\n\n        const index = categories.findIndex(category => category.id === id);\n        let holder = [...categories];\n        holder[index].checked = checked;\n        this.setState({categories: [...holder]});\n    };\n\n    handleSubmit = e => {\n        e.preventDefault();\n\n        const {\n            name,\n            categories,\n            cover,\n            defaultIcon,\n            explorePageIcon,\n            recommendedTitleIcon,\n            avatars,\n            avatarStyles\n        } = this.state;\n\n        let promises = [];\n\n        let categoryIDs = [];\n        categories.forEach(category => {\n            if (category.checked) categoryIDs.push(category.id);\n        })\n        if (categoryIDs.length === 0) {\n            showNotification(NOTIFICATION.ERROR, 'At least 1 category is required');\n            return;\n        }\n\n        this.setState({isLoading: true});\n\n        // Add a new document with a generated id.\n        db.add({\n            name: name,\n            views: 0,\n            reviews: 0,\n            likes: 0,\n            description: '',\n            categories: categoryIDs\n        }).then((docRef) => {\n            showNotification(NOTIFICATION.SUCCESS, 'Data added successfully!');\n            showNotification(NOTIFICATION.INFO, 'Uploading files..');\n\n            let path = `${directory}/stories/${docRef.id}`;\n\n            if (cover.file) promises.push(this.uploadFile(path, cover.file, 'cover.png'));\n            if (defaultIcon.file) promises.push(this.uploadFile(path, defaultIcon.file, 'icon.png'));\n            if (explorePageIcon.file) promises.push(this.uploadFile(path, explorePageIcon.file, 'rect2x_icon.png'));\n            if (recommendedTitleIcon.file) promises.push(this.uploadFile(path, recommendedTitleIcon.file, 'rect_icon.png'));\n            if (avatarStyles.file) promises.push(this.uploadFile(`${path}/Avatars`, avatarStyles.file, 'style.txt'));\n\n            avatars.forEach(avatar => {\n                promises.push(this.uploadFile(`${path}/Avatars`, avatar.file));\n            });\n\n            Promise.all(promises).then(r => {\n                showNotification(NOTIFICATION.SUCCESS, 'Book added successfully!');\n                this.backToList();\n            }).catch(e => {\n                db.doc(docRef.id).delete().then(() => {\n                    // showNotification(NOTIFICATION.ERROR, 'Something went wrong. Try again!');\n                    showNotification(NOTIFICATION.ERROR, e.toString());\n                    this.setState({isLoading: false});\n                }).catch((error) => {\n                    showNotification(NOTIFICATION.ERROR, error.toString());\n                    this.setState({isLoading: false});\n                });\n            });\n\n        }).catch((error) => {\n            showNotification(NOTIFICATION.ERROR, 'Something went wrong. Try again!');\n            this.setState({isLoading: false});\n        });\n    };\n\n    //Handle waiting to upload each file using promise\n    uploadFile(directory, file, filename = null) {\n        return new Promise(function (resolve, reject) {\n            filename = filename ? filename : file.name ;\n            const storageRef = firebase.storage().ref(directory + \"/\" + filename);\n            //Upload file\n            let uploadTask = storageRef.put(file);\n            // Listen for state changes, errors, and completion of the upload.\n            uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED,\n                null,\n                (error) => {\n                    // A full list of error codes is available at\n                    // https://firebase.google.com/docs/storage/web/handle-errors\n                    switch (error.code) {\n                        case 'storage/unauthorized':\n